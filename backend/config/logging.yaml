version: 1
disable_existing_loggers: false

formatters: # Define how log messages are formatted
  color:
    format: '%(log_color)s%(asctime)s - %(name)s - %(levelname)s - %(funcName)s:%(lineno)d - %(message)s'
    datefmt: '%Y-%m-%d %H:%M:%S'
    () : colorlog.ColoredFormatter
    log_colors:
      DEBUG:    cyan
      INFO:     white
      WARNING:  yellow
      ERROR:    red
      CRITICAL: bold_red

  detailed:
    format: '%(asctime)s - %(name)s - %(levelname)s - %(funcName)s:%(lineno)d - %(message)s'
    datefmt: '%Y-%m-%d %H:%M:%S'
  
  simple:
    format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    datefmt: '%Y-%m-%d %H:%M:%S'
  
  json:
    format: '{"timestamp":"%(asctime)s","logger":"%(name)s","level":"%(levelname)s","function":"%(funcName)s","line":%(lineno)d,"message":"%(message)s"}'

handlers: # Define where log messages go
  console: # Log to console
    class: logging.StreamHandler 
    level: DEBUG
    formatter: color
    stream: ext://sys.stdout
  
  file_debug: # Log files with today's date
    class: logging.handlers.RotatingFileHandler
    level: DEBUG
    formatter: detailed
    filename: logs/app_%(date)s.log
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: utf8
  
  file_error: # Error log files with today's date
    class: logging.handlers.RotatingFileHandler
    level: ERROR
    formatter: detailed
    filename: logs/error_%(date)s.log
    maxBytes: 10485760
    backupCount: 10
    encoding: utf8

# Silent to third party loggers
loggers:
  openai:
    level: WARNING
    propagate: true
  httpcore:
    level: WARNING
    propagate: true
  httpx:
    level: WARNING
    propagate: true
  urllib3:
    level: WARNING
    propagate: true

# Single root logger for all modules
root:
  level: INFO
  handlers: [console, file_debug, file_error]